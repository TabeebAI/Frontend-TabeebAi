import{r as p,U as Yt,V as Ae,W as L,X as _t,Y as lt,Z as qt,_ as Le,$ as Me,j as et,a0 as Ve,a1 as Y,a2 as je,a3 as we,a4 as Be,a5 as ke,a6 as Zt,a7 as be,a8 as Ue,a9 as Ie,aa as Oe,ab as Fe,ac as nt,ad as Ne,ae as T,af as C,ag as A,ah as We,ai as Kt,aj as $e,ak as F,al as Ge,am as He,an as it,ao as Jt,ap as P,aq as ze,ar as Xe,as as Ye,at as ut,au as Qt,av as z,aw as te,ax as B,ay as ee,az as ct,aA as _e,aB as qe,aC as ie,aD as se,aE as ne,aF as Ze,aG as ht,aH as Ke,aI as Je,aJ as q,aK as V,aL as N,aM as W,aN as ft,aO as Qe,aP as ti,aQ as ei,aR as j,aS as dt,aT as ii,aU as si,aV as ni,aW as oi}from"./index-Bi6rW_Cc.js";const oe=p.createContext({});function ai(t){const e=p.useRef(null);return e.current===null&&(e.current=t()),e.current}const ri=Yt?p.useLayoutEffect:p.useEffect,ot=p.createContext(null),ae=p.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function li(t=!0){const e=p.useContext(ot);if(e===null)return[!0,null];const{isPresent:i,onExitComplete:s,register:a}=e,c=p.useId();p.useEffect(()=>{if(t)return a(c)},[t]);const n=p.useCallback(()=>t&&s&&s(c),[c,s,t]);return!i&&s?[!1,n]:[!0]}const{schedule:at}=Ae(queueMicrotask,!1);function ui(t){return t==="x"||t==="y"?L[t]?null:(L[t]=!0,()=>{L[t]=!1}):L.x||L.y?null:(L.x=L.y=!0,()=>{L.x=L.y=!1})}const ci=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function X(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ci.has(t)}let re=t=>!X(t);function hi(t){t&&(re=e=>e.startsWith("on")?!X(e):t(e))}try{hi(require("@emotion/is-prop-valid").default)}catch{}function fi(t,e,i){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(re(a)||i===!0&&X(a)||!e&&!X(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}function di(t){if(typeof Proxy>"u")return t;const e=new Map,i=(...s)=>t(...s);return new Proxy(i,{get:(s,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const _=p.createContext({});function mi(t,e){if(_t(t)){const{initial:i,animate:s}=t;return{initial:i===!1||lt(i)?i:void 0,animate:lt(s)?s:void 0}}return t.inherit!==!1?e:{}}function pi(t){const{initial:e,animate:i}=mi(t,p.useContext(_));return p.useMemo(()=>({initial:e,animate:i}),[mt(e),mt(i)])}function mt(t){return Array.isArray(t)?t.join(" "):t}const gi=Symbol.for("motionComponentSymbol");function w(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function yi(t,e,i){return p.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),i&&(typeof i=="function"?i(s):w(i)&&(i.current=s))},[e])}const le=p.createContext({});function vi(t,e,i,s,a){var g,y;const{visualElement:c}=p.useContext(_),n=p.useContext(qt),o=p.useContext(ot),r=p.useContext(ae).reducedMotion,u=p.useRef(null);s=s||n.renderer,!u.current&&s&&(u.current=s(t,{visualState:e,parent:c,props:i,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:r}));const l=u.current,h=p.useContext(le);l&&!l.projection&&a&&(l.type==="html"||l.type==="svg")&&xi(u.current,i,a,h);const d=p.useRef(!1);p.useInsertionEffect(()=>{l&&d.current&&l.update(i,o)});const f=i[Le],m=p.useRef(!!f&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,f))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,f)));return ri(()=>{l&&(d.current=!0,window.MotionIsMounted=!0,l.updateFeatures(),at.render(l.render),m.current&&l.animationState&&l.animationState.animateChanges())}),p.useEffect(()=>{l&&(!m.current&&l.animationState&&l.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,f)}),m.current=!1))}),l}function xi(t,e,i,s){const{layoutId:a,layout:c,drag:n,dragConstraints:o,layoutScroll:r,layoutRoot:u,layoutCrossfade:l}=e;t.projection=new i(t.latestValues,e["data-framer-portal-id"]?void 0:ue(t.parent)),t.projection.setOptions({layoutId:a,layout:c,alwaysMeasureLayout:!!n||o&&w(o),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,crossfade:l,layoutScroll:r,layoutRoot:u})}function ue(t){if(t)return t.options.allowProjection!==!1?t.projection:ue(t.parent)}function Pi({preloadedFeatures:t,createVisualElement:e,useRender:i,useVisualState:s,Component:a}){t&&Me(t);function c(o,r){let u;const l={...p.useContext(ae),...o,layoutId:Ti(o)},{isStatic:h}=l,d=pi(o),f=s(o,h);if(!h&&Yt){Si();const m=Di(l);u=m.MeasureLayout,d.visualElement=vi(a,f,l,e,m.ProjectionNode)}return et.jsxs(_.Provider,{value:d,children:[u&&d.visualElement?et.jsx(u,{visualElement:d.visualElement,...l}):null,i(a,o,yi(f,d.visualElement,r),f,h,d.visualElement)]})}c.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const n=p.forwardRef(c);return n[gi]=a,n}function Ti({layoutId:t}){const e=p.useContext(oe).id;return e&&t!==void 0?e+"-"+t:t}function Si(t,e){p.useContext(qt).strict}function Di(t){const{drag:e,layout:i}=Ve;if(!e&&!i)return{};const s={...e,...i};return{MeasureLayout:e!=null&&e.isEnabled(t)||i!=null&&i.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const rt=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ce(t,e,i){for(const s in e)!Y(e[s])&&!je(s,i)&&(t[s]=e[s])}function Ci({transformTemplate:t},e){return p.useMemo(()=>{const i=rt();return we(i,e,t),Object.assign({},i.vars,i.style)},[e])}function Ei(t,e){const i=t.style||{},s={};return ce(s,i,t),Object.assign(s,Ci(t,e)),s}function Ri(t,e){const i={},s=Ei(t,e);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=s,i}const he=()=>({...rt(),attrs:{}});function Ai(t,e,i,s){const a=p.useMemo(()=>{const c=he();return Be(c,e,ke(s),t.transformTemplate),{...c.attrs,style:{...c.style}}},[e]);if(t.style){const c={};ce(c,t.style,t),a.style={...c,...a.style}}return a}function Li(t=!1){return(i,s,a,{latestValues:c},n)=>{const r=(Zt(i)?Ai:Ri)(s,c,n,i),u=fi(s,typeof i=="string",t),l=i!==p.Fragment?{...u,...r,ref:a}:{},{children:h}=s,d=p.useMemo(()=>Y(h)?h.get():h,[h]);return p.createElement(i,{...l,children:d})}}function G(t){return Y(t)?t.get():t}function Mi({scrapeMotionValuesFromProps:t,createRenderState:e},i,s,a){return{latestValues:Vi(i,s,a,t),renderState:e()}}const fe=t=>(e,i)=>{const s=p.useContext(_),a=p.useContext(ot),c=()=>Mi(t,e,s,a);return i?c():ai(c)};function Vi(t,e,i,s){const a={},c=s(t,{});for(const d in c)a[d]=G(c[d]);let{initial:n,animate:o}=t;const r=_t(t),u=be(t);e&&u&&!r&&t.inherit!==!1&&(n===void 0&&(n=e.initial),o===void 0&&(o=e.animate));let l=i?i.initial===!1:!1;l=l||n===!1;const h=l?o:n;if(h&&typeof h!="boolean"&&!Ue(h)){const d=Array.isArray(h)?h:[h];for(let f=0;f<d.length;f++){const m=Ie(t,d[f]);if(m){const{transitionEnd:g,transition:y,...v}=m;for(const S in v){let x=v[S];if(Array.isArray(x)){const M=l?x.length-1:0;x=x[M]}x!==null&&(a[S]=x)}for(const S in g)a[S]=g[S]}}}return a}const ji={useVisualState:fe({scrapeMotionValuesFromProps:Oe,createRenderState:rt})},wi={useVisualState:fe({scrapeMotionValuesFromProps:Fe,createRenderState:he})};function Bi(t,e){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const n={...Zt(s)?wi:ji,preloadedFeatures:t,useRender:Li(a),createVisualElement:e,Component:s};return Pi(n)}}function U(t,e,i,s){return nt(t,e,Ne(i),s)}const de=1e-4,ki=1-de,bi=1+de,me=.01,Ui=0-me,Ii=0+me;function D(t){return t.max-t.min}function Oi(t,e,i){return Math.abs(t-e)<=i}function pt(t,e,i,s=.5){t.origin=s,t.originPoint=T(e.min,e.max,t.origin),t.scale=D(i)/D(e),t.translate=T(i.min,i.max,t.origin)-t.originPoint,(t.scale>=ki&&t.scale<=bi||isNaN(t.scale))&&(t.scale=1),(t.translate>=Ui&&t.translate<=Ii||isNaN(t.translate))&&(t.translate=0)}function I(t,e,i,s){pt(t.x,e.x,i.x,s?s.originX:void 0),pt(t.y,e.y,i.y,s?s.originY:void 0)}function gt(t,e,i){t.min=i.min+e.min,t.max=t.min+D(e)}function Fi(t,e,i){gt(t.x,e.x,i.x),gt(t.y,e.y,i.y)}function yt(t,e,i){t.min=e.min-i.min,t.max=t.min+D(e)}function O(t,e,i){yt(t.x,e.x,i.x),yt(t.y,e.y,i.y)}function R(t){return[t("x"),t("y")]}const pe=({current:t})=>t?t.ownerDocument.defaultView:null,vt=(t,e)=>Math.abs(t-e);function Ni(t,e){const i=vt(t.x,e.x),s=vt(t.y,e.y);return Math.sqrt(i**2+s**2)}class ge{constructor(e,i,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=K(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=Ni(h.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:m}=h,{timestamp:g}=C;this.history.push({...m,timestamp:g});const{onStart:y,onMove:v}=this.handlers;d||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Z(d,this.transformPagePoint),A.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:f,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=K(h.type==="pointercancel"?this.lastMoveEventInfo:Z(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,y),m&&m(h,y)},!We(e))return;this.dragSnapToOrigin=c,this.handlers=i,this.transformPagePoint=s,this.contextWindow=a||window;const n=Kt(e),o=Z(n,this.transformPagePoint),{point:r}=o,{timestamp:u}=C;this.history=[{...r,timestamp:u}];const{onSessionStart:l}=i;l&&l(e,K(o,this.history)),this.removeListeners=$e(U(this.contextWindow,"pointermove",this.handlePointerMove),U(this.contextWindow,"pointerup",this.handlePointerUp),U(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),F(this.updatePoint)}}function Z(t,e){return e?{point:e(t.point)}:t}function xt(t,e){return{x:t.x-e.x,y:t.y-e.y}}function K({point:t},e){return{point:t,delta:xt(t,ye(e)),offset:xt(t,Wi(e)),velocity:$i(e,.1)}}function Wi(t){return t[0]}function ye(t){return t[t.length-1]}function $i(t,e){if(t.length<2)return{x:0,y:0};let i=t.length-1,s=null;const a=ye(t);for(;i>=0&&(s=t[i],!(a.timestamp-s.timestamp>Ge(e)));)i--;if(!s)return{x:0,y:0};const c=He(a.timestamp-s.timestamp);if(c===0)return{x:0,y:0};const n={x:(a.x-s.x)/c,y:(a.y-s.y)/c};return n.x===1/0&&(n.x=0),n.y===1/0&&(n.y=0),n}function Gi(t,{min:e,max:i},s){return e!==void 0&&t<e?t=s?T(e,t,s.min):Math.max(t,e):i!==void 0&&t>i&&(t=s?T(i,t,s.max):Math.min(t,i)),t}function Pt(t,e,i){return{min:e!==void 0?t.min+e:void 0,max:i!==void 0?t.max+i-(t.max-t.min):void 0}}function Hi(t,{top:e,left:i,bottom:s,right:a}){return{x:Pt(t.x,i,a),y:Pt(t.y,e,s)}}function Tt(t,e){let i=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([i,s]=[s,i]),{min:i,max:s}}function zi(t,e){return{x:Tt(t.x,e.x),y:Tt(t.y,e.y)}}function Xi(t,e){let i=.5;const s=D(t),a=D(e);return a>s?i=it(e.min,e.max-s,t.min):s>a&&(i=it(t.min,t.max-a,e.min)),Jt(0,1,i)}function Yi(t,e){const i={};return e.min!==void 0&&(i.min=e.min-t.min),e.max!==void 0&&(i.max=e.max-t.min),i}const st=.35;function _i(t=st){return t===!1?t=0:t===!0&&(t=st),{x:St(t,"left","right"),y:St(t,"top","bottom")}}function St(t,e,i){return{min:Dt(t,e),max:Dt(t,i)}}function Dt(t,e){return typeof t=="number"?t:t[e]||0}const qi=new WeakMap;class Zi{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=P(),this.visualElement=e}start(e,{snapToCursor:i=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=l=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(Kt(l).point)},c=(l,h)=>{const{drag:d,dragPropagation:f,onDragStart:m}=this.getProps();if(d&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ui(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),R(y=>{let v=this.getAxisMotionValue(y).get()||0;if(z.test(v)){const{projection:S}=this.visualElement;if(S&&S.layout){const x=S.layout.layoutBox[y];x&&(v=D(x)*(parseFloat(v)/100))}}this.originPoint[y]=v}),m&&A.postRender(()=>m(l,h)),ut(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},n=(l,h)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:m,onDrag:g}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:y}=h;if(f&&this.currentDirection===null){this.currentDirection=Ki(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),g&&g(l,h)},o=(l,h)=>this.stop(l,h),r=()=>R(l=>{var h;return this.getAnimationState(l)==="paused"&&((h=this.getAxisMotionValue(l).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new ge(e,{onSessionStart:a,onStart:c,onMove:n,onSessionEnd:o,resumeAnimation:r},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:pe(this.visualElement)})}stop(e,i){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&A.postRender(()=>c(e,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:i}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(e,i,s){const{drag:a}=this.getProps();if(!s||!$(e,a,this.currentDirection))return;const c=this.getAxisMotionValue(e);let n=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(n=Gi(n,this.constraints[e],this.elastic[e])),c.set(n)}resolveConstraints(){var c;const{dragConstraints:e,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(c=this.visualElement.projection)==null?void 0:c.layout,a=this.constraints;e&&w(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=Hi(s.layoutBox,e):this.constraints=!1,this.elastic=_i(i),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&R(n=>{this.constraints!==!1&&this.getAxisMotionValue(n)&&(this.constraints[n]=Yi(s.layoutBox[n],this.constraints[n]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:i}=this.getProps();if(!e||!w(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=ze(s,a.root,this.visualElement.getTransformPagePoint());let n=zi(a.layout.layoutBox,c);if(i){const o=i(Xe(n));this.hasMutatedConstraints=!!o,o&&(n=Ye(o))}return n}startAnimation(e){const{drag:i,dragMomentum:s,dragElastic:a,dragTransition:c,dragSnapToOrigin:n,onDragTransitionEnd:o}=this.getProps(),r=this.constraints||{},u=R(l=>{if(!$(l,i,this.currentDirection))return;let h=r&&r[l]||{};n&&(h={min:0,max:0});const d=a?200:1e6,f=a?40:1e7,m={type:"inertia",velocity:s?e[l]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...c,...h};return this.startAxisValueAnimation(l,m)});return Promise.all(u).then(o)}startAxisValueAnimation(e,i){const s=this.getAxisMotionValue(e);return ut(this.visualElement,e),s.start(Qt(e,s,0,i,this.visualElement,!1))}stopAnimation(){R(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){R(e=>{var i;return(i=this.getAxisMotionValue(e).animation)==null?void 0:i.pause()})}getAnimationState(e){var i;return(i=this.getAxisMotionValue(e).animation)==null?void 0:i.state}getAxisMotionValue(e){const i=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[i];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){R(i=>{const{drag:s}=this.getProps();if(!$(i,s,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(i);if(a&&a.layout){const{min:n,max:o}=a.layout.layoutBox[i];c.set(e[i]-T(n,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:i}=this.getProps(),{projection:s}=this.visualElement;if(!w(i)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};R(n=>{const o=this.getAxisMotionValue(n);if(o&&this.constraints!==!1){const r=o.get();a[n]=Xi({min:r,max:r},this.constraints[n])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),R(n=>{if(!$(n,e,null))return;const o=this.getAxisMotionValue(n),{min:r,max:u}=this.constraints[n];o.set(T(r,u,a[n]))})}addListeners(){if(!this.visualElement.current)return;qi.set(this.visualElement,this);const e=this.visualElement.current,i=U(e,"pointerdown",r=>{const{drag:u,dragListener:l=!0}=this.getProps();u&&l&&this.start(r)}),s=()=>{const{dragConstraints:r}=this.getProps();w(r)&&r.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),A.read(s);const n=nt(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:r,hasLayoutChanged:u})=>{this.isDragging&&u&&(R(l=>{const h=this.getAxisMotionValue(l);h&&(this.originPoint[l]+=r[l].translate,h.set(h.get()+r[l].translate))}),this.visualElement.render())});return()=>{n(),i(),c(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:n=st,dragMomentum:o=!0}=e;return{...e,drag:i,dragDirectionLock:s,dragPropagation:a,dragConstraints:c,dragElastic:n,dragMomentum:o}}}function $(t,e,i){return(e===!0||e===t)&&(i===null||i===t)}function Ki(t,e=10){let i=null;return Math.abs(t.y)>e?i="y":Math.abs(t.x)>e&&(i="x"),i}class Ji extends te{constructor(e){super(e),this.removeGroupControls=B,this.removeListeners=B,this.controls=new Zi(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||B}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ct=t=>(e,i)=>{t&&A.postRender(()=>t(e,i))};class Qi extends te{constructor(){super(...arguments),this.removePointerDownListener=B}onPointerDown(e){this.session=new ge(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pe(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:i,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:Ct(e),onStart:Ct(i),onMove:s,onEnd:(c,n)=>{delete this.session,a&&A.postRender(()=>a(c,n))}}}mount(){this.removePointerDownListener=U(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const H={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Et(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const b={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ee.test(t))t=parseFloat(t);else return t;const i=Et(t,e.target.x),s=Et(t,e.target.y);return`${i}% ${s}%`}},ts={correct:(t,{treeScale:e,projectionDelta:i})=>{const s=t,a=ct.parse(t);if(a.length>5)return s;const c=ct.createTransformer(t),n=typeof a[0]!="number"?1:0,o=i.x.scale*e.x,r=i.y.scale*e.y;a[0+n]/=o,a[1+n]/=r;const u=T(o,r,.5);return typeof a[2+n]=="number"&&(a[2+n]/=u),typeof a[3+n]=="number"&&(a[3+n]/=u),c(a)}};class es extends p.Component{componentDidMount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:s,layoutId:a}=this.props,{projection:c}=e;_e(is),c&&(i.group&&i.group.add(c),s&&s.register&&a&&s.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),H.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:i,visualElement:s,drag:a,isPresent:c}=this.props,n=s.projection;return n&&(n.isPresent=c,a||e.layoutDependency!==i||i===void 0||e.isPresent!==c?n.willUpdate():this.safeToRemove(),e.isPresent!==c&&(c?n.promote():n.relegate()||A.postRender(()=>{const o=n.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),at.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:s}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ve(t){const[e,i]=li(),s=p.useContext(oe);return et.jsx(es,{...t,layoutGroup:s,switchLayoutGroup:p.useContext(le),isPresent:e,safeToRemove:i})}const is={borderRadius:{...b,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:b,borderTopRightRadius:b,borderBottomLeftRadius:b,borderBottomRightRadius:b,boxShadow:ts};function ss(t,e,i){const s=Y(t)?t:qe(t);return s.start(Qt("",s,e,i)),s.animation}function ns(t){return t instanceof SVGElement&&t.tagName!=="svg"}const os=(t,e)=>t.depth-e.depth;class as{constructor(){this.children=[],this.isDirty=!1}add(e){ie(this.children,e),this.isDirty=!0}remove(e){se(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(os),this.isDirty=!1,this.children.forEach(e)}}function rs(t,e){const i=ne.now(),s=({timestamp:a})=>{const c=a-i;c>=e&&(F(s),t(c-e))};return A.setup(s,!0),()=>F(s)}const xe=["TopLeft","TopRight","BottomLeft","BottomRight"],ls=xe.length,Rt=t=>typeof t=="string"?parseFloat(t):t,At=t=>typeof t=="number"||ee.test(t);function us(t,e,i,s,a,c){a?(t.opacity=T(0,i.opacity??1,cs(s)),t.opacityExit=T(e.opacity??1,0,hs(s))):c&&(t.opacity=T(e.opacity??1,i.opacity??1,s));for(let n=0;n<ls;n++){const o=`border${xe[n]}Radius`;let r=Lt(e,o),u=Lt(i,o);if(r===void 0&&u===void 0)continue;r||(r=0),u||(u=0),r===0||u===0||At(r)===At(u)?(t[o]=Math.max(T(Rt(r),Rt(u),s),0),(z.test(u)||z.test(r))&&(t[o]+="%")):t[o]=u}(e.rotate||i.rotate)&&(t.rotate=T(e.rotate||0,i.rotate||0,s))}function Lt(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const cs=Pe(0,.5,Ze),hs=Pe(.5,.95,B);function Pe(t,e,i){return s=>s<t?0:s>e?1:i(it(t,e,s))}function Mt(t,e){t.min=e.min,t.max=e.max}function E(t,e){Mt(t.x,e.x),Mt(t.y,e.y)}function Vt(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function jt(t,e,i,s,a){return t-=e,t=ht(t,1/i,s),a!==void 0&&(t=ht(t,1/a,s)),t}function fs(t,e=0,i=1,s=.5,a,c=t,n=t){if(z.test(e)&&(e=parseFloat(e),e=T(n.min,n.max,e/100)-n.min),typeof e!="number")return;let o=T(c.min,c.max,s);t===c&&(o-=e),t.min=jt(t.min,e,i,o,a),t.max=jt(t.max,e,i,o,a)}function wt(t,e,[i,s,a],c,n){fs(t,e[i],e[s],e[a],e.scale,c,n)}const ds=["x","scaleX","originX"],ms=["y","scaleY","originY"];function Bt(t,e,i,s){wt(t.x,e,ds,i?i.x:void 0,s?s.x:void 0),wt(t.y,e,ms,i?i.y:void 0,s?s.y:void 0)}function kt(t){return t.translate===0&&t.scale===1}function Te(t){return kt(t.x)&&kt(t.y)}function bt(t,e){return t.min===e.min&&t.max===e.max}function ps(t,e){return bt(t.x,e.x)&&bt(t.y,e.y)}function Ut(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Se(t,e){return Ut(t.x,e.x)&&Ut(t.y,e.y)}function It(t){return D(t.x)/D(t.y)}function Ot(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class gs{constructor(){this.members=[]}add(e){ie(this.members,e),e.scheduleRender()}remove(e){if(se(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(e){const i=this.members.findIndex(a=>e===a);if(i===0)return!1;let s;for(let a=i;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){s=c;break}}return s?(this.promote(s),!0):!1}promote(e,i){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,i&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:i,resumingFrom:s}=e;i.onExitComplete&&i.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ys(t,e,i){let s="";const a=t.x.translate/e.x,c=t.y.translate/e.y,n=(i==null?void 0:i.z)||0;if((a||c||n)&&(s=`translate3d(${a}px, ${c}px, ${n}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),i){const{transformPerspective:u,rotate:l,rotateX:h,rotateY:d,skewX:f,skewY:m}=i;u&&(s=`perspective(${u}px) ${s}`),l&&(s+=`rotate(${l}deg) `),h&&(s+=`rotateX(${h}deg) `),d&&(s+=`rotateY(${d}deg) `),f&&(s+=`skewX(${f}deg) `),m&&(s+=`skewY(${m}deg) `)}const o=t.x.scale*e.x,r=t.y.scale*e.y;return(o!==1||r!==1)&&(s+=`scale(${o}, ${r})`),s||"none"}const J=["","X","Y","Z"],vs={visibility:"hidden"},Ft=1e3;let xs=0;function Q(t,e,i,s){const{latestValues:a}=e;a[t]&&(i[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function De(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const i=ii(e);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:a,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",A,!(a||c))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&De(s)}function Ce({attachResizeListener:t,defaultParent:e,measureScroll:i,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(n={},o=e==null?void 0:e()){this.id=xs++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ss),this.nodes.forEach(As),this.nodes.forEach(Ls),this.nodes.forEach(Ds)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=n,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let r=0;r<this.path.length;r++)this.path[r].shouldResetTransform=!0;this.root===this&&(this.nodes=new as)}addEventListener(n,o){return this.eventHandlers.has(n)||this.eventHandlers.set(n,new Ke),this.eventHandlers.get(n).add(o)}notifyListeners(n,...o){const r=this.eventHandlers.get(n);r&&r.notify(...o)}hasListeners(n){return this.eventHandlers.has(n)}mount(n,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=ns(n),this.instance=n;const{layoutId:r,layout:u,visualElement:l}=this.options;if(l&&!l.current&&l.mount(n),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||r)&&(this.isLayoutDirty=!0),t){let h;const d=()=>this.root.updateBlockedByResize=!1;t(n,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=rs(d,250),H.hasAnimatedSinceResize&&(H.hasAnimatedSinceResize=!1,this.nodes.forEach(Wt))})}r&&this.root.registerSharedNode(r,this),this.options.animate!==!1&&l&&(r||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||l.getDefaultTransition()||Bs,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=l.getProps(),S=!this.targetLayout||!Se(this.targetLayout,m),x=!d&&f;if(this.options.layoutRoot||this.resumeFrom||x||d&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,x);const M={...Je(g,"layout"),onPlay:y,onComplete:v};(l.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else d||Wt(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const n=this.getStack();n&&n.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,F(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ms),this.animationId++)}getTransformTemplate(){const{visualElement:n}=this.options;return n&&n.getProps().transformTemplate}willUpdate(n=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&De(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let l=0;l<this.path.length;l++){const h=this.path[l];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:r}=this.options;if(o===void 0&&!r)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),n&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Nt);return}this.isUpdating||this.nodes.forEach(Es),this.isUpdating=!1,this.nodes.forEach(Rs),this.nodes.forEach(Ps),this.nodes.forEach(Ts),this.clearAllSnapshots();const o=ne.now();C.delta=Jt(0,1e3/60,o-C.timestamp),C.timestamp=o,C.isProcessing=!0,q.update.process(C),q.preRender.process(C),q.render.process(C),C.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,at.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Cs),this.sharedNodes.forEach(Vs)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,A.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){A.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!D(this.snapshot.measuredBox.x)&&!D(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++)this.path[r].updateScroll();const n=this.layout;this.layout=this.measure(!1),this.layoutCorrected=P(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,n?n.layoutBox:void 0)}updateScroll(n="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===n&&(o=!1),o){const r=s(this.instance);this.scroll={animationId:this.root.animationId,phase:n,isRoot:r,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:r}}}resetTransform(){if(!a)return;const n=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Te(this.projectionDelta),r=this.getTransformTemplate(),u=r?r(this.latestValues,""):void 0,l=u!==this.prevTransformTemplateValue;n&&(o||V(this.latestValues)||l)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(n=!0){const o=this.measurePageBox();let r=this.removeElementScroll(o);return n&&(r=this.removeTransform(r)),ks(r),{animationId:this.root.animationId,measuredBox:o,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:n}=this.options;if(!n)return P();const o=n.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(bs))){const{scroll:l}=this.root;l&&(N(o.x,l.offset.x),N(o.y,l.offset.y))}return o}removeElementScroll(n){var r;const o=P();if(E(o,n),(r=this.scroll)!=null&&r.wasRoot)return o;for(let u=0;u<this.path.length;u++){const l=this.path[u],{scroll:h,options:d}=l;l!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&E(o,n),N(o.x,h.offset.x),N(o.y,h.offset.y))}return o}applyTransform(n,o=!1){const r=P();E(r,n);for(let u=0;u<this.path.length;u++){const l=this.path[u];!o&&l.options.layoutScroll&&l.scroll&&l!==l.root&&W(r,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),V(l.latestValues)&&W(r,l.latestValues)}return V(this.latestValues)&&W(r,this.latestValues),r}removeTransform(n){const o=P();E(o,n);for(let r=0;r<this.path.length;r++){const u=this.path[r];if(!u.instance||!V(u.latestValues))continue;ft(u.latestValues)&&u.updateSnapshot();const l=P(),h=u.measurePageBox();E(l,h),Bt(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,l)}return V(this.latestValues)&&Bt(o,this.latestValues),o}setTargetDelta(n){this.targetDelta=n,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(n){this.options={...this.options,...n,crossfade:n.crossfade!==void 0?n.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==C.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(n=!1){var d;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const r=!!this.resumingFrom||this!==o;if(!(n||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(d=this.parent)!=null&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:l,layoutId:h}=this.options;if(!(!this.layout||!(l||h))){if(this.resolvedRelativeTargetAt=C.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=P(),this.relativeTargetOrigin=P(),O(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),E(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=P(),this.targetWithTransforms=P()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Fi(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):E(this.target,this.layout.layoutBox),Qe(this.target,this.targetDelta)):E(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=P(),this.relativeTargetOrigin=P(),O(this.relativeTargetOrigin,this.target,f.target),E(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ft(this.parent.latestValues)||ti(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const n=this.getLead(),o=!!this.resumingFrom||this!==n;let r=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(r=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===C.timestamp&&(r=!1),r)return;const{layout:u,layoutId:l}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||l))return;E(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;ei(this.layoutCorrected,this.treeScale,this.path,o),n.layout&&!n.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(n.target=n.layout.layoutBox,n.targetWithTransforms=P());const{target:f}=n;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Vt(this.prevProjectionDelta.x,this.projectionDelta.x),Vt(this.prevProjectionDelta.y,this.projectionDelta.y)),I(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!Ot(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ot(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(n=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),n){const r=this.getStack();r&&r.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=j(),this.projectionDelta=j(),this.projectionDeltaWithTransform=j()}setAnimationOrigin(n,o=!1){const r=this.snapshot,u=r?r.latestValues:{},l={...this.latestValues},h=j();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=P(),f=r?r.source:void 0,m=this.layout?this.layout.source:void 0,g=f!==m,y=this.getStack(),v=!y||y.members.length<=1,S=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(ws));this.animationProgress=0;let x;this.mixTargetDelta=M=>{const k=M/1e3;$t(h.x,n.x,k),$t(h.y,n.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(O(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),js(this.relativeTarget,this.relativeTargetOrigin,d,k),x&&ps(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=P()),E(x,this.relativeTarget)),g&&(this.animationValues=l,us(l,u,this.latestValues,k,S,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(n){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(F(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=A.update(()=>{H.hasAnimatedSinceResize=!0,this.currentAnimation=ss(0,Ft,{...n,onUpdate:o=>{this.mixTargetDelta(o),n.onUpdate&&n.onUpdate(o)},onStop:()=>{},onComplete:()=>{n.onComplete&&n.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const n=this.getStack();n&&n.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ft),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const n=this.getLead();let{targetWithTransforms:o,target:r,layout:u,latestValues:l}=n;if(!(!o||!r||!u)){if(this!==n&&this.layout&&u&&Ee(this.options.animationType,this.layout.layoutBox,u.layoutBox)){r=this.target||P();const h=D(this.layout.layoutBox.x);r.x.min=n.target.x.min,r.x.max=r.x.min+h;const d=D(this.layout.layoutBox.y);r.y.min=n.target.y.min,r.y.max=r.y.min+d}E(o,r),W(o,l),I(this.projectionDeltaWithTransform,this.layoutCorrected,o,l)}}registerSharedNode(n,o){this.sharedNodes.has(n)||this.sharedNodes.set(n,new gs),this.sharedNodes.get(n).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const n=this.getStack();return n?n.lead===this:!0}getLead(){var o;const{layoutId:n}=this.options;return n?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:n}=this.options;return n?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:n}=this.options;if(n)return this.root.sharedNodes.get(n)}promote({needsReset:n,transition:o,preserveFollowOpacity:r}={}){const u=this.getStack();u&&u.promote(this,r),n&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const n=this.getStack();return n?n.relegate(this):!1}resetSkewAndRotation(){const{visualElement:n}=this.options;if(!n)return;let o=!1;const{latestValues:r}=n;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(o=!0),!o)return;const u={};r.z&&Q("z",n,u,this.animationValues);for(let l=0;l<J.length;l++)Q(`rotate${J[l]}`,n,u,this.animationValues),Q(`skew${J[l]}`,n,u,this.animationValues);n.render();for(const l in u)n.setStaticValue(l,u[l]),this.animationValues&&(this.animationValues[l]=u[l]);n.scheduleRender()}getProjectionStyles(n){if(!this.instance||this.isSVG)return;if(!this.isVisible)return vs;const o={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=G(n==null?void 0:n.pointerEvents)||"",o.transform=r?r(this.latestValues,""):"none",o;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=G(n==null?void 0:n.pointerEvents)||""),this.hasProjected&&!V(this.latestValues)&&(f.transform=r?r({},""):"none",this.hasProjected=!1),f}const l=u.animationValues||u.latestValues;this.applyTransformsToTarget(),o.transform=ys(this.projectionDeltaWithTransform,this.treeScale,l),r&&(o.transform=r(l,o.transform));const{x:h,y:d}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${d.origin*100}% 0`,u.animationValues?o.opacity=u===this?l.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:l.opacityExit:o.opacity=u===this?l.opacity!==void 0?l.opacity:"":l.opacityExit!==void 0?l.opacityExit:0;for(const f in dt){if(l[f]===void 0)continue;const{correct:m,applyTo:g,isCSSVariable:y}=dt[f],v=o.transform==="none"?l[f]:m(l[f],u);if(g){const S=g.length;for(let x=0;x<S;x++)o[g[x]]=v}else y?this.options.visualElement.renderState.vars[f]=v:o[f]=v}return this.options.layoutId&&(o.pointerEvents=u===this?G(n==null?void 0:n.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(n=>{var o;return(o=n.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(Nt),this.root.sharedNodes.clear()}}}function Ps(t){t.updateLayout()}function Ts(t){var i;const e=((i=t.resumeFrom)==null?void 0:i.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=t.layout,{animationType:c}=t.options,n=e.source!==t.layout.source;c==="size"?R(h=>{const d=n?e.measuredBox[h]:e.layoutBox[h],f=D(d);d.min=s[h].min,d.max=d.min+f}):Ee(c,e.layoutBox,s)&&R(h=>{const d=n?e.measuredBox[h]:e.layoutBox[h],f=D(s[h]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+f)});const o=j();I(o,s,e.layoutBox);const r=j();n?I(r,t.applyTransform(a,!0),e.measuredBox):I(r,s,e.layoutBox);const u=!Te(o);let l=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const m=P();O(m,e.layoutBox,d.layoutBox);const g=P();O(g,s,f.layoutBox),Se(m,g)||(l=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=m,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:r,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:l})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function Ss(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Ds(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Cs(t){t.clearSnapshot()}function Nt(t){t.clearMeasurements()}function Es(t){t.isLayoutDirty=!1}function Rs(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Wt(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function As(t){t.resolveTargetDelta()}function Ls(t){t.calcProjection()}function Ms(t){t.resetSkewAndRotation()}function Vs(t){t.removeLeadSnapshot()}function $t(t,e,i){t.translate=T(e.translate,0,i),t.scale=T(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function Gt(t,e,i,s){t.min=T(e.min,i.min,s),t.max=T(e.max,i.max,s)}function js(t,e,i,s){Gt(t.x,e.x,i.x,s),Gt(t.y,e.y,i.y,s)}function ws(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Bs={duration:.45,ease:[.4,0,.1,1]},Ht=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),zt=Ht("applewebkit/")&&!Ht("chrome/")?Math.round:B;function Xt(t){t.min=zt(t.min),t.max=zt(t.max)}function ks(t){Xt(t.x),Xt(t.y)}function Ee(t,e,i){return t==="position"||t==="preserve-aspect"&&!Oi(It(e),It(i),.2)}function bs(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Us=Ce({attachResizeListener:(t,e)=>nt(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tt={current:void 0},Re=Ce({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!tt.current){const t=new Us({});t.mount(window),t.setOptions({layoutScroll:!0}),tt.current=t}return tt.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Is={pan:{Feature:Qi},drag:{Feature:Ji,ProjectionNode:Re,MeasureLayout:ve}},Os={layout:{ProjectionNode:Re,MeasureLayout:ve}},Fs=Bi({...oi,...ni,...Is,...Os},si),$s=di(Fs);export{$s as m};
